<!DOCTYPE html><html><head><meta charset="utf-8"><title>PYQT-信号与槽</title>    <link rel="stylesheet" href="../js/editor.md/css/editormd.min.css">   <script src="../js/jquery-1.12.js" type="text/javascript" charset="utf-8"></script>
   <script src="../js/article-preload.js" type="text/javascript" charset="utf-8"></script>
<link rel="stylesheet" href="../css/article.css"></head><body><!-- 导航条 --><div class="nav">    <!-- 回主页的"图标" -->    <a href="../../index.jsp" class="back-to-index">JancoBlog</a></div><!-- 所属分类 --><div class="article-sort"></div><!-- 标题栏 --><h1 class="article-title">PYQT-信号与槽</h1><!-- 作者栏 --><div class="article-info"><div class="article-author">作者：Jancoyan</div><div class="article-submit-time">发布时间：2021-05-06 21:25:14</div><div class="article-view-time"></div></div><div class="article-content"><div class="markdown-body editormd-preview-container" previewcontainer="true" style="padding: 20px;"><h2 id="h2-u4FE1u53F7u4E0Eu69FD"><a name="信号与槽" class="reference-link"></a><span class="header-link octicon octicon-link"></span>信号与槽</h2><h3 id="h3-u4E00u4E2Au4FE1u53F7u4E00u4E2Au69FD"><a name="一个信号一个槽" class="reference-link"></a><span class="header-link octicon octicon-link"></span>一个信号一个槽</h3><ul>
<li>信号clicked：点击</li></ul>
<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-python"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Demo</span><span class="pun">(</span><span class="typ">QWidget</span><span class="pun">):</span><span class="pln">  </span><span class="com"># 继承QWidget</span></code></li><li class="L1"><code class="lang-python"><span class="pln">    </span><span class="kwd">def</span><span class="pln"> __init__</span><span class="pun">(</span><span class="pln">self</span><span class="pun">):</span></code></li><li class="L2"><code class="lang-python"><span class="pln">        super</span><span class="pun">(</span><span class="typ">Demo</span><span class="pun">,</span><span class="pln"> self</span><span class="pun">).</span><span class="pln">__init__</span><span class="pun">()</span></code></li><li class="L3"><code class="lang-python"></code></li><li class="L4"><code class="lang-python"><span class="pln">        self</span><span class="pun">.</span><span class="pln">button </span><span class="pun">=</span><span class="pln"> </span><span class="typ">QPushButton</span><span class="pun">(</span><span class="str">'Start'</span><span class="pun">,</span><span class="pln"> self</span><span class="pun">)</span><span class="pln">  </span><span class="com"># 因为是继承于QWidget，所以self不能忘了</span></code></li><li class="L5"><code class="lang-python"><span class="pln">        </span><span class="com"># （相当于告诉了程序这个QPushButton是放在QWidget这个房子中的）</span></code></li><li class="L6"><code class="lang-python"><span class="pln">        self</span><span class="pun">.</span><span class="pln">button</span><span class="pun">.</span><span class="pln">clicked</span><span class="pun">.</span><span class="pln">connect</span><span class="pun">(</span><span class="pln">self</span><span class="pun">.</span><span class="pln">change_text</span><span class="pun">)</span><span class="pln">  </span><span class="com"># 连接信号与槽函数</span></code></li><li class="L7"><code class="lang-python"><span class="pln">        </span><span class="com"># self.button 是一个控件，clicked（按钮被点击）是一个信号，connect()是连接，括号中是槽函数</span></code></li><li class="L8"><code class="lang-python"></code></li><li class="L9"><code class="lang-python"><span class="pln">    </span><span class="kwd">def</span><span class="pln"> change_text</span><span class="pun">(</span><span class="pln">self</span><span class="pun">):</span></code></li><li class="L0"><code class="lang-python"><span class="pln">        </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'change text'</span><span class="pun">)</span></code></li><li class="L1"><code class="lang-python"><span class="pln">        self</span><span class="pun">.</span><span class="pln">button</span><span class="pun">.</span><span class="pln">setText</span><span class="pun">(</span><span class="str">'Stop'</span><span class="pun">)</span></code></li><li class="L2"><code class="lang-python"><span class="pln">        self</span><span class="pun">.</span><span class="pln">button</span><span class="pun">.</span><span class="pln">clicked</span><span class="pun">.</span><span class="pln">disconnect</span><span class="pun">(</span><span class="pln">self</span><span class="pun">.</span><span class="pln">change_text</span><span class="pun">)</span><span class="pln">  </span><span class="com"># 信号与槽解绑，如果把这一行注释掉，则每一次点击都会输出一次change text</span></code></li></ol></pre>
<h3 id="h3-u591Au4E2Au4FE1u53F7u4E00u4E2Au69FD"><a name="多个信号一个槽" class="reference-link"></a><span class="header-link octicon octicon-link"></span>多个信号一个槽</h3><ul>
<li>信号 pressed：当鼠标在button上并单击左键的时候触发信号</li><li>信号 released：当鼠标左键被释放的时候触发信号</li></ul>
<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-python"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Demo</span><span class="pun">(</span><span class="typ">QWidget</span><span class="pun">):</span><span class="pln">  </span><span class="com"># 继承QWidget</span></code></li><li class="L1"><code class="lang-python"><span class="pln">    </span><span class="kwd">def</span><span class="pln"> __init__</span><span class="pun">(</span><span class="pln">self</span><span class="pun">):</span></code></li><li class="L2"><code class="lang-python"><span class="pln">        super</span><span class="pun">(</span><span class="typ">Demo</span><span class="pun">,</span><span class="pln"> self</span><span class="pun">).</span><span class="pln">__init__</span><span class="pun">()</span></code></li><li class="L3"><code class="lang-python"><span class="pln">        self</span><span class="pun">.</span><span class="pln">button </span><span class="pun">=</span><span class="pln"> </span><span class="typ">QPushButton</span><span class="pun">(</span><span class="str">'Start'</span><span class="pun">,</span><span class="pln"> self</span><span class="pun">)</span></code></li><li class="L4"><code class="lang-python"><span class="pln">        self</span><span class="pun">.</span><span class="pln">button</span><span class="pun">.</span><span class="pln">pressed</span><span class="pun">.</span><span class="pln">connect</span><span class="pun">(</span><span class="pln">self</span><span class="pun">.</span><span class="pln">change_text</span><span class="pun">)</span></code></li><li class="L5"><code class="lang-python"><span class="pln">        self</span><span class="pun">.</span><span class="pln">button</span><span class="pun">.</span><span class="pln">released</span><span class="pun">.</span><span class="pln">connect</span><span class="pun">(</span><span class="pln">self</span><span class="pun">.</span><span class="pln">change_text</span><span class="pun">)</span></code></li><li class="L6"><code class="lang-python"></code></li><li class="L7"><code class="lang-python"><span class="pln">    </span><span class="kwd">def</span><span class="pln"> change_text</span><span class="pun">(</span><span class="pln">self</span><span class="pun">):</span></code></li><li class="L8"><code class="lang-python"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> self</span><span class="pun">.</span><span class="pln">button</span><span class="pun">.</span><span class="pln">text</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Start'</span><span class="pun">:</span></code></li><li class="L9"><code class="lang-python"><span class="pln">            self</span><span class="pun">.</span><span class="pln">button</span><span class="pun">.</span><span class="pln">setText</span><span class="pun">(</span><span class="str">'Stop'</span><span class="pun">)</span></code></li><li class="L0"><code class="lang-python"><span class="pln">        </span><span class="kwd">else</span><span class="pun">:</span></code></li><li class="L1"><code class="lang-python"><span class="pln">            self</span><span class="pun">.</span><span class="pln">button</span><span class="pun">.</span><span class="pln">setText</span><span class="pun">(</span><span class="str">'Start'</span><span class="pun">)</span></code></li></ol></pre>
<h3 id="h3-u4FE1u53F7u4E0Eu4FE1u53F7u8FDEu63A5"><a name="信号与信号连接" class="reference-link"></a><span class="header-link octicon octicon-link"></span>信号与信号连接</h3><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-python"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Demo</span><span class="pun">(</span><span class="typ">QWidget</span><span class="pun">):</span></code></li><li class="L1"><code class="lang-python"><span class="pln">    </span><span class="kwd">def</span><span class="pln"> __init__</span><span class="pun">(</span><span class="pln">self</span><span class="pun">):</span></code></li><li class="L2"><code class="lang-python"><span class="pln">        super</span><span class="pun">(</span><span class="typ">Demo</span><span class="pun">,</span><span class="pln"> self</span><span class="pun">).</span><span class="pln">__init__</span><span class="pun">()</span></code></li><li class="L3"><code class="lang-python"><span class="pln">        self</span><span class="pun">.</span><span class="pln">button </span><span class="pun">=</span><span class="pln"> </span><span class="typ">QPushButton</span><span class="pun">(</span><span class="str">'Start'</span><span class="pun">,</span><span class="pln"> self</span><span class="pun">)</span></code></li><li class="L4"><code class="lang-python"><span class="pln">        </span><span class="com">#  将pressed信号和released信号连接起来，而released信号则与槽函数连接。</span></code></li><li class="L5"><code class="lang-python"><span class="pln">        </span><span class="com">#  这样当点击不放时，pressed信号发出，released信号也会发出，从而启动槽函数。</span></code></li><li class="L6"><code class="lang-python"><span class="pln">        </span><span class="com">#  释放鼠标则发出released信号，再次启动槽函数。所以程序运行效果跟2.2小节其实是一样的。</span></code></li><li class="L7"><code class="lang-python"><span class="pln">        self</span><span class="pun">.</span><span class="pln">button</span><span class="pun">.</span><span class="pln">pressed</span><span class="pun">.</span><span class="pln">connect</span><span class="pun">(</span><span class="pln">self</span><span class="pun">.</span><span class="pln">button</span><span class="pun">.</span><span class="pln">released</span><span class="pun">)</span></code></li><li class="L8"><code class="lang-python"><span class="pln">        self</span><span class="pun">.</span><span class="pln">button</span><span class="pun">.</span><span class="pln">released</span><span class="pun">.</span><span class="pln">connect</span><span class="pun">(</span><span class="pln">self</span><span class="pun">.</span><span class="pln">change_text</span><span class="pun">)</span></code></li><li class="L9"><code class="lang-python"></code></li><li class="L0"><code class="lang-python"><span class="pln">    </span><span class="kwd">def</span><span class="pln"> change_text</span><span class="pun">(</span><span class="pln">self</span><span class="pun">):</span></code></li><li class="L1"><code class="lang-python"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> self</span><span class="pun">.</span><span class="pln">button</span><span class="pun">.</span><span class="pln">text</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'Start'</span><span class="pun">:</span></code></li><li class="L2"><code class="lang-python"><span class="pln">            self</span><span class="pun">.</span><span class="pln">button</span><span class="pun">.</span><span class="pln">setText</span><span class="pun">(</span><span class="str">'Stop'</span><span class="pun">)</span></code></li><li class="L3"><code class="lang-python"><span class="pln">        </span><span class="kwd">else</span><span class="pun">:</span></code></li><li class="L4"><code class="lang-python"><span class="pln">            self</span><span class="pun">.</span><span class="pln">button</span><span class="pun">.</span><span class="pln">setText</span><span class="pun">(</span><span class="str">'Start'</span><span class="pun">)</span></code></li></ol></pre>
<h3 id="h3-u4E00u4E2Au4FE1u53F7u591Au4E2Au69FD"><a name="一个信号多个槽" class="reference-link"></a><span class="header-link octicon octicon-link"></span>一个信号多个槽</h3><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-python"><span class="kwd">class</span><span class="pln"> </span><span class="typ">Demo</span><span class="pun">(</span><span class="typ">QWidget</span><span class="pun">):</span></code></li><li class="L1"><code class="lang-python"><span class="pln">    </span><span class="kwd">def</span><span class="pln"> __init__</span><span class="pun">(</span><span class="pln">self</span><span class="pun">):</span></code></li><li class="L2"><code class="lang-python"><span class="pln">        super</span><span class="pun">(</span><span class="typ">Demo</span><span class="pun">,</span><span class="pln"> self</span><span class="pun">).</span><span class="pln">__init__</span><span class="pun">()</span></code></li><li class="L3"><code class="lang-python"><span class="pln">        self</span><span class="pun">.</span><span class="pln">resize</span><span class="pun">(</span><span class="lit">300</span><span class="pun">,</span><span class="pln"> </span><span class="lit">300</span><span class="pun">)</span><span class="pln">  </span><span class="com"># 初始化窗口的大小</span></code></li><li class="L4"><code class="lang-python"><span class="pln">        self</span><span class="pun">.</span><span class="pln">setWindowTitle</span><span class="pun">(</span><span class="str">'demo'</span><span class="pun">)</span><span class="pln">  </span><span class="com"># 设置窗口名称</span></code></li><li class="L5"><code class="lang-python"><span class="pln">        self</span><span class="pun">.</span><span class="pln">button </span><span class="pun">=</span><span class="pln"> </span><span class="typ">QPushButton</span><span class="pun">(</span><span class="str">'Start'</span><span class="pun">,</span><span class="pln"> self</span><span class="pun">)</span></code></li><li class="L6"><code class="lang-python"><span class="pln">        </span><span class="com"># 连接三个槽函数</span></code></li><li class="L7"><code class="lang-python"><span class="pln">        self</span><span class="pun">.</span><span class="pln">button</span><span class="pun">.</span><span class="pln">clicked</span><span class="pun">.</span><span class="pln">connect</span><span class="pun">(</span><span class="pln">self</span><span class="pun">.</span><span class="pln">change_text</span><span class="pun">)</span></code></li><li class="L8"><code class="lang-python"><span class="pln">        self</span><span class="pun">.</span><span class="pln">button</span><span class="pun">.</span><span class="pln">clicked</span><span class="pun">.</span><span class="pln">connect</span><span class="pun">(</span><span class="pln">self</span><span class="pun">.</span><span class="pln">change_window_size</span><span class="pun">)</span><span class="pln">  </span><span class="com"># 3</span></code></li><li class="L9"><code class="lang-python"><span class="pln">        self</span><span class="pun">.</span><span class="pln">button</span><span class="pun">.</span><span class="pln">clicked</span><span class="pun">.</span><span class="pln">connect</span><span class="pun">(</span><span class="pln">self</span><span class="pun">.</span><span class="pln">change_window_title</span><span class="pun">)</span><span class="pln">  </span><span class="com"># 4</span></code></li><li class="L0"><code class="lang-python"></code></li><li class="L1"><code class="lang-python"><span class="pln">    </span><span class="kwd">def</span><span class="pln"> change_text</span><span class="pun">(</span><span class="pln">self</span><span class="pun">):</span></code></li><li class="L2"><code class="lang-python"><span class="pln">        </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'change text'</span><span class="pun">)</span></code></li><li class="L3"><code class="lang-python"><span class="pln">        self</span><span class="pun">.</span><span class="pln">button</span><span class="pun">.</span><span class="pln">setText</span><span class="pun">(</span><span class="str">'Stop'</span><span class="pun">)</span></code></li><li class="L4"><code class="lang-python"><span class="pln">        self</span><span class="pun">.</span><span class="pln">button</span><span class="pun">.</span><span class="pln">clicked</span><span class="pun">.</span><span class="pln">disconnect</span><span class="pun">(</span><span class="pln">self</span><span class="pun">.</span><span class="pln">change_text</span><span class="pun">)</span></code></li><li class="L5"><code class="lang-python"></code></li><li class="L6"><code class="lang-python"><span class="pln">    </span><span class="kwd">def</span><span class="pln"> change_window_size</span><span class="pun">(</span><span class="pln">self</span><span class="pun">):</span><span class="pln">  </span><span class="com"># 5</span></code></li><li class="L7"><code class="lang-python"><span class="pln">        </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'change window size'</span><span class="pun">)</span></code></li><li class="L8"><code class="lang-python"><span class="pln">        self</span><span class="pun">.</span><span class="pln">resize</span><span class="pun">(</span><span class="lit">500</span><span class="pun">,</span><span class="pln"> </span><span class="lit">500</span><span class="pun">)</span></code></li><li class="L9"><code class="lang-python"><span class="pln">        self</span><span class="pun">.</span><span class="pln">button</span><span class="pun">.</span><span class="pln">clicked</span><span class="pun">.</span><span class="pln">disconnect</span><span class="pun">(</span><span class="pln">self</span><span class="pun">.</span><span class="pln">change_window_size</span><span class="pun">)</span></code></li><li class="L0"><code class="lang-python"></code></li><li class="L1"><code class="lang-python"><span class="pln">    </span><span class="kwd">def</span><span class="pln"> change_window_title</span><span class="pun">(</span><span class="pln">self</span><span class="pun">):</span><span class="pln">  </span><span class="com"># 6</span></code></li><li class="L2"><code class="lang-python"><span class="pln">        </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'change window title'</span><span class="pun">)</span></code></li><li class="L3"><code class="lang-python"><span class="pln">        self</span><span class="pun">.</span><span class="pln">setWindowTitle</span><span class="pun">(</span><span class="str">'window title changed'</span><span class="pun">)</span></code></li><li class="L4"><code class="lang-python"><span class="pln">        self</span><span class="pun">.</span><span class="pln">button</span><span class="pun">.</span><span class="pln">clicked</span><span class="pun">.</span><span class="pln">disconnect</span><span class="pun">(</span><span class="pln">self</span><span class="pun">.</span><span class="pln">change_window_title</span><span class="pun">)</span></code></li></ol></pre>
</div></div><div class="article-comment"><div class="comment-title">添加笔记</div> <hr><div class="comment-list"></div><div class="add-comment"><textarea maxlength="20" placeholder="昵称" id="edit-comment-author" rows="1" cols="110"></textarea><textarea maxlength="50" placeholder="邮箱" id="edit-comment-email" rows="1" cols="110"></textarea><textarea maxlength="1000" placeholder="笔记" id="edit-comment-content" rows="5" cols="110"></textarea><button class="add-comment-btn">添加</button></div></div></body></html>