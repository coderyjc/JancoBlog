<!DOCTYPE html><html><head><meta charset="utf-8"><title>MyBatis逆向工程</title>    <link rel="stylesheet" href="../js/editor.md/css/editormd.min.css">   <script src="../js/jquery-1.12.js" type="text/javascript" charset="utf-8"></script>
   <script src="../js/article-preload.js" type="text/javascript" charset="utf-8"></script>
<link rel="stylesheet" href="../css/article.css"></head><body><!-- 导航条 --><div class="nav">    <!-- 回主页的"图标" -->    <a href="../../index.jsp" class="back-to-index">JancoBlog</a></div><!-- 所属分类 --><div class="article-sort"></div><!-- 标题栏 --><h1 class="article-title">MyBatis逆向工程</h1><!-- 作者栏 --><div class="article-info"><div class="article-author">作者：Jancoyan</div><div class="article-submit-time">发布时间：2021-05-06 21:12:54</div><div class="article-view-time"></div></div><div class="article-content"><div class="markdown-body editormd-preview-container" previewcontainer="true" style="padding: 20px;"><h1 id="h1-mybatis-mybatis-generator-"><a name="MyBatis逆向工程 - MyBatis Generator的使用" class="reference-link"></a><span class="header-link octicon octicon-link"></span>MyBatis逆向工程 - MyBatis Generator的使用</h1><blockquote>
<p>官网 ： <a href="http://mybatis.org/generator/">http://mybatis.org/generator/</a></p>
</blockquote>
<ol>
<li><p>添加依赖 、引入jar包</p>
<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-xml"><span class="pln">    </span><span class="com">&lt;!-- pom.xml --&gt;</span></code></li><li class="L1"><code class="lang-xml"></code></li><li class="L2"><code class="lang-xml"><span class="pln">    </span><span class="com">&lt;!-- MBG --&gt;</span></code></li><li class="L3"><code class="lang-xml"><span class="pln">    </span><span class="com">&lt;!-- https://mvnrepository.com/artifact/org.mybatis.generator/mybatis-generator-core --&gt;</span></code></li><li class="L4"><code class="lang-xml"><span class="pln">    </span><span class="tag">&lt;dependency&gt;</span></code></li><li class="L5"><code class="lang-xml"><span class="pln">      </span><span class="tag">&lt;groupId&gt;</span><span class="pln">org.mybatis.generator</span><span class="tag">&lt;/groupId&gt;</span></code></li><li class="L6"><code class="lang-xml"><span class="pln">      </span><span class="tag">&lt;artifactId&gt;</span><span class="pln">mybatis-generator-core</span><span class="tag">&lt;/artifactId&gt;</span></code></li><li class="L7"><code class="lang-xml"><span class="pln">      </span><span class="tag">&lt;version&gt;</span><span class="pln">1.3.5</span><span class="tag">&lt;/version&gt;</span></code></li><li class="L8"><code class="lang-xml"><span class="pln">    </span><span class="tag">&lt;/dependency&gt;</span></code></li></ol></pre>
</li><li><p>在项目主目录下创建<code>mbg.xml</code> （也就是和pom.xml一个目录）</p>
<blockquote>
<p>MyBatis Generator 官方给出了xml文件的示例 <a href="http://mybatis.org/generator/configreference/xmlconfig.html">http://mybatis.org/generator/configreference/xmlconfig.html</a>, 我们只需要在这基础上稍作修改。</p>
</blockquote>
<p>以下是我修改之后的配置文件：</p>
</li></ol>
<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-xml"><span class="pln">   </span><span class="pun">&lt;?</span><span class="pln">xml version</span><span class="pun">=</span><span class="str">"1.0"</span><span class="pln"> encoding</span><span class="pun">=</span><span class="str">"UTF-8"</span><span class="pun">?&gt;</span></code></li><li class="L1"><code class="lang-xml"><span class="pln">   </span><span class="dec">&lt;!DOCTYPE generatorConfiguration</span></code></li><li class="L2"><code class="lang-xml"><span class="dec">           PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"</span></code></li><li class="L3"><code class="lang-xml"><span class="dec">           "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd"&gt;</span></code></li><li class="L4"><code class="lang-xml"><span class="pln">   </span><span class="tag">&lt;generatorConfiguration&gt;</span></code></li><li class="L5"><code class="lang-xml"></code></li><li class="L6"><code class="lang-xml"><span class="pln">       </span><span class="tag">&lt;context</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"DB2Tables"</span><span class="pln"> </span><span class="atn">targetRuntime</span><span class="pun">=</span><span class="atv">"MyBatis3"</span><span class="tag">&gt;</span></code></li><li class="L7"><code class="lang-xml"></code></li><li class="L8"><code class="lang-xml"><span class="pln">   </span><span class="com">&lt;!--        设置不生成注释，可写，可不写--&gt;</span></code></li><li class="L9"><code class="lang-xml"><span class="pln">           </span><span class="tag">&lt;commentGenerator&gt;</span></code></li><li class="L0"><code class="lang-xml"><span class="pln">               </span><span class="tag">&lt;property</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"suppressAllComments"</span><span class="pln"> </span><span class="atn">value</span><span class="pun">=</span><span class="atv">"true"</span><span class="tag">/&gt;</span></code></li><li class="L1"><code class="lang-xml"><span class="pln">           </span><span class="tag">&lt;/commentGenerator&gt;</span></code></li><li class="L2"><code class="lang-xml"></code></li><li class="L3"><code class="lang-xml"><span class="pln">   </span><span class="com">&lt;!--        配置数据库连接--&gt;</span></code></li><li class="L4"><code class="lang-xml"><span class="pln">           </span><span class="tag">&lt;jdbcConnection</span><span class="pln"> </span><span class="atn">driverClass</span><span class="pun">=</span><span class="atv">"com.mysql.jdbc.Driver"</span></code></li><li class="L5"><code class="lang-xml"><span class="pln">                           </span><span class="atn">connectionURL</span><span class="pun">=</span><span class="atv">"jdbc:mysql://localhost:3306/ssm"</span></code></li><li class="L6"><code class="lang-xml"><span class="pln">                           </span><span class="atn">userId</span><span class="pun">=</span><span class="atv">"root"</span></code></li><li class="L7"><code class="lang-xml"><span class="pln">                           </span><span class="atn">password</span><span class="pun">=</span><span class="atv">"333"</span><span class="tag">&gt;</span></code></li><li class="L8"><code class="lang-xml"><span class="pln">           </span><span class="tag">&lt;/jdbcConnection&gt;</span></code></li><li class="L9"><code class="lang-xml"></code></li><li class="L0"><code class="lang-xml"><span class="pln">           </span><span class="tag">&lt;javaTypeResolver</span><span class="pln"> </span><span class="tag">&gt;</span></code></li><li class="L1"><code class="lang-xml"><span class="pln">               </span><span class="tag">&lt;property</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"forceBigDecimals"</span><span class="pln"> </span><span class="atn">value</span><span class="pun">=</span><span class="atv">"false"</span><span class="pln"> </span><span class="tag">/&gt;</span></code></li><li class="L2"><code class="lang-xml"><span class="pln">           </span><span class="tag">&lt;/javaTypeResolver&gt;</span></code></li><li class="L3"><code class="lang-xml"></code></li><li class="L4"><code class="lang-xml"><span class="pln">   </span><span class="com">&lt;!--       JavaBean生成的位置--&gt;</span></code></li><li class="L5"><code class="lang-xml"><span class="pln">           </span><span class="tag">&lt;javaModelGenerator</span><span class="pln"> </span><span class="atn">targetPackage</span><span class="pun">=</span><span class="atv">"com.Jancoyan.domain"</span></code></li><li class="L6"><code class="lang-xml"><span class="pln">                               </span><span class="atn">targetProject</span><span class="pun">=</span><span class="atv">"./src/main/java"</span><span class="tag">&gt;</span></code></li><li class="L7"><code class="lang-xml"><span class="pln">               </span><span class="tag">&lt;property</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"enableSubPackages"</span><span class="pln"> </span><span class="atn">value</span><span class="pun">=</span><span class="atv">"true"</span><span class="pln"> </span><span class="tag">/&gt;</span></code></li><li class="L8"><code class="lang-xml"><span class="pln">               </span><span class="tag">&lt;property</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"trimStrings"</span><span class="pln"> </span><span class="atn">value</span><span class="pun">=</span><span class="atv">"true"</span><span class="pln"> </span><span class="tag">/&gt;</span></code></li><li class="L9"><code class="lang-xml"><span class="pln">           </span><span class="tag">&lt;/javaModelGenerator&gt;</span></code></li><li class="L0"><code class="lang-xml"></code></li><li class="L1"><code class="lang-xml"><span class="pln">   </span><span class="com">&lt;!--        mapper文件生成的位置--&gt;</span></code></li><li class="L2"><code class="lang-xml"><span class="pln">           </span><span class="tag">&lt;sqlMapGenerator</span><span class="pln"> </span><span class="atn">targetPackage</span><span class="pun">=</span><span class="atv">"mapper"</span></code></li><li class="L3"><code class="lang-xml"><span class="pln">                            </span><span class="atn">targetProject</span><span class="pun">=</span><span class="atv">"./src/main/resources"</span><span class="tag">&gt;</span></code></li><li class="L4"><code class="lang-xml"><span class="pln">               </span><span class="tag">&lt;property</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"enableSubPackages"</span><span class="pln"> </span><span class="atn">value</span><span class="pun">=</span><span class="atv">"true"</span><span class="pln"> </span><span class="tag">/&gt;</span></code></li><li class="L5"><code class="lang-xml"><span class="pln">           </span><span class="tag">&lt;/sqlMapGenerator&gt;</span></code></li><li class="L6"><code class="lang-xml"></code></li><li class="L7"><code class="lang-xml"><span class="pln">   </span><span class="com">&lt;!--        DAO文件生成的位置--&gt;</span></code></li><li class="L8"><code class="lang-xml"><span class="pln">           </span><span class="tag">&lt;javaClientGenerator</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"XMLMAPPER"</span></code></li><li class="L9"><code class="lang-xml"><span class="pln">                                </span><span class="atn">targetPackage</span><span class="pun">=</span><span class="atv">"com.Jancoyan.dao"</span></code></li><li class="L0"><code class="lang-xml"><span class="pln">                                </span><span class="atn">targetProject</span><span class="pun">=</span><span class="atv">"./src/main/java"</span><span class="tag">&gt;</span></code></li><li class="L1"><code class="lang-xml"><span class="pln">               </span><span class="tag">&lt;property</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"enableSubPackages"</span><span class="pln"> </span><span class="atn">value</span><span class="pun">=</span><span class="atv">"true"</span><span class="pln"> </span><span class="tag">/&gt;</span></code></li><li class="L2"><code class="lang-xml"><span class="pln">           </span><span class="tag">&lt;/javaClientGenerator&gt;</span></code></li><li class="L3"><code class="lang-xml"></code></li><li class="L4"><code class="lang-xml"></code></li><li class="L5"><code class="lang-xml"><span class="pln">   </span><span class="com">&lt;!--        表相关数据--&gt;</span></code></li><li class="L6"><code class="lang-xml"><span class="pln">   </span><span class="com">&lt;!--        tableName表示需要生成的表名字</span></code></li><li class="L7"><code class="lang-xml"><span class="com">                  domainObjectName 表示生成的类名--&gt;</span></code></li><li class="L8"><code class="lang-xml"><span class="pln">           </span><span class="tag">&lt;table</span><span class="pln"> </span><span class="atn">tableName</span><span class="pun">=</span><span class="atv">"tbl_dept"</span><span class="pln"> </span><span class="atn">domainObjectName</span><span class="pun">=</span><span class="atv">"Department"</span><span class="pln"> </span><span class="tag">/&gt;</span></code></li><li class="L9"><code class="lang-xml"><span class="pln">           </span><span class="tag">&lt;table</span><span class="pln"> </span><span class="atn">tableName</span><span class="pun">=</span><span class="atv">"tbl_emp"</span><span class="pln"> </span><span class="atn">domainObjectName</span><span class="pun">=</span><span class="atv">"Employee"</span><span class="pln"> </span><span class="tag">/&gt;</span></code></li><li class="L0"><code class="lang-xml"></code></li><li class="L1"><code class="lang-xml"><span class="pln">       </span><span class="tag">&lt;/context&gt;</span></code></li><li class="L2"><code class="lang-xml"><span class="pln">   </span><span class="tag">&lt;/generatorConfiguration&gt;</span></code></li></ol></pre>
<p>   相关标签解释：</p>
<ul>
<li><p>jdbcConnection 配置数据库连接</p>
<ul>
<li>标签是自己的数据库配置信息</li></ul>
</li><li><p>javaModelGenerator 指定JavaBean生成的位置</p>
<ul>
<li>targetPackage: 需要生成的包</li><li>targetProject: 指定生成的位置</li></ul>
</li><li><p>sqlMapGenerator 指定SQL映射文件生成位置</p>
<ul>
<li>targetPackage: 需要生成的包</li><li>targetProject: 指定生成的位置</li></ul>
</li><li><p>javaClientGenerator 指定DAO接口生成的位置</p>
<ul>
<li>targetPackage: 需要生成的包</li><li>targetProject: 指定生成的位置</li></ul>
</li><li><p>table 指定每个表的生成策略</p>
<ul>
<li>tableName属性 需要逆向生成的表名</li><li>domainObjectName 生成的类名</li></ul>
</li></ul>
<ol>
<li><p>编写Java文件运行生成相关类</p>
<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-java"><span class="kwd">package</span><span class="pln"> com</span><span class="pun">.</span><span class="typ">Jancoyan</span><span class="pun">.</span><span class="pln">test</span><span class="pun">;</span></code></li><li class="L1"><code class="lang-java"></code></li><li class="L2"><code class="lang-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">mybatis</span><span class="pun">.</span><span class="pln">generator</span><span class="pun">.</span><span class="pln">api</span><span class="pun">.</span><span class="typ">MyBatisGenerator</span><span class="pun">;</span></code></li><li class="L3"><code class="lang-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">mybatis</span><span class="pun">.</span><span class="pln">generator</span><span class="pun">.</span><span class="pln">config</span><span class="pun">.</span><span class="typ">Configuration</span><span class="pun">;</span></code></li><li class="L4"><code class="lang-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">mybatis</span><span class="pun">.</span><span class="pln">generator</span><span class="pun">.</span><span class="pln">config</span><span class="pun">.</span><span class="pln">xml</span><span class="pun">.</span><span class="typ">ConfigurationParser</span><span class="pun">;</span></code></li><li class="L5"><code class="lang-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">mybatis</span><span class="pun">.</span><span class="pln">generator</span><span class="pun">.</span><span class="pln">internal</span><span class="pun">.</span><span class="typ">DefaultShellCallback</span><span class="pun">;</span></code></li><li class="L6"><code class="lang-java"></code></li><li class="L7"><code class="lang-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">File</span><span class="pun">;</span></code></li><li class="L8"><code class="lang-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">ArrayList</span><span class="pun">;</span></code></li><li class="L9"><code class="lang-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">List</span><span class="pun">;</span></code></li><li class="L0"><code class="lang-java"></code></li><li class="L1"><code class="lang-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">MBGTest</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code class="lang-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> main</span><span class="pun">(</span><span class="typ">String</span><span class="pun">[]</span><span class="pln"> args</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">Exception</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3"><code class="lang-java"><span class="pln">        </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> warnings </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ArrayList</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">&gt;();</span></code></li><li class="L4"><code class="lang-java"><span class="pln">        </span><span class="kwd">boolean</span><span class="pln"> overwrite </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L5"><code class="lang-java"><span class="pln">        </span><span class="typ">File</span><span class="pln"> configFile </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">File</span><span class="pun">(</span><span class="str">"mbg.xml"</span><span class="pun">);</span><span class="pln"> </span><span class="com">// 自己的配置文件的名称</span></code></li><li class="L6"><code class="lang-java"><span class="pln">        </span><span class="typ">ConfigurationParser</span><span class="pln"> cp </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ConfigurationParser</span><span class="pun">(</span><span class="pln">warnings</span><span class="pun">);</span></code></li><li class="L7"><code class="lang-java"><span class="pln">        </span><span class="typ">Configuration</span><span class="pln"> config </span><span class="pun">=</span><span class="pln"> cp</span><span class="pun">.</span><span class="pln">parseConfiguration</span><span class="pun">(</span><span class="pln">configFile</span><span class="pun">);</span></code></li><li class="L8"><code class="lang-java"><span class="pln">        </span><span class="typ">DefaultShellCallback</span><span class="pln"> callback </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">DefaultShellCallback</span><span class="pun">(</span><span class="pln">overwrite</span><span class="pun">);</span></code></li><li class="L9"><code class="lang-java"><span class="pln">        </span><span class="typ">MyBatisGenerator</span><span class="pln"> myBatisGenerator </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">MyBatisGenerator</span><span class="pun">(</span><span class="pln">config</span><span class="pun">,</span><span class="pln"> callback</span><span class="pun">,</span><span class="pln"> warnings</span><span class="pun">);</span></code></li><li class="L0"><code class="lang-java"><span class="pln">        myBatisGenerator</span><span class="pun">.</span><span class="pln">generate</span><span class="pun">(</span><span class="kwd">null</span><span class="pun">);</span></code></li><li class="L1"><code class="lang-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L2"><code class="lang-java"><span class="pun">}</span></code></li></ol></pre>
<p>运行成功之后就生成了相关类。</p>
</li></ol>
</div></div><div class="article-comment"><div class="comment-title">添加笔记</div> <hr><div class="comment-list"></div><div class="add-comment"><textarea maxlength="20" placeholder="昵称" id="edit-comment-author" rows="1" cols="110"></textarea><textarea maxlength="50" placeholder="邮箱" id="edit-comment-email" rows="1" cols="110"></textarea><textarea maxlength="1000" placeholder="笔记" id="edit-comment-content" rows="5" cols="110"></textarea><button class="add-comment-btn">添加</button></div></div></body></html>